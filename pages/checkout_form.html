<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
    <script src = "../scripts/scripts.js" type = "text/javascript"></script>
    <title>TeamTaub</title>
</head>
<body>

    <nav>
        <h4 class="step">Step 3 &#127918</h4>
    </nav>

    <h1 class="center nobr">TeamTaub Gaming Plans</h1>   

    <div class="center text_style container">

        <span>You choose</span>
        <span class="primary_word">
            <script>
                document.write(getPlanName());
            </script>
        </span>
        <span>.</span>

        <form action="thank_you.html" method="get" class="credit_card" onsubmit="return validDate();">
            <h3>Enter your credit card details:</h3>

            <div class="form-body">  

                <!-- CCNumber Field -->
                <div class="card_num">
                    <label for="CCNumber">Card Number: </label>
                    <input type="text" 
                            name="CCNumber"
                            id="CCNumber" 
                            maxlength="16"
                            minlength="16"
                            pattern="[0-9]+"
                            placeholder="16 digits"
                            required>
                </div>

                <!-- Name Field -->
                <div class="card_name">
                    <label for="name">Name: </label>
                    <input type="text"
                            name="name"
                            placeholder="English letters only"
                            pattern="[' ']*[A-Za-z]+[A-Za-z' ']*" 
                            id="name" 
                            required>
                </div>

                <!-- CVV Field -->
                <div class="card_cvv">
                    <label for="cvv">CVV: </label>
                    <input type="text" 
                        name="cvv" 
                        id="cvv"
                        pattern="[0-9]+" 
                        maxlength="3"
                        minlength="3"
                        placeholder="3 digits"
                        required >
                </div>

                <!-- Date Field -->
                <div class="date_card">
                    <label for="date-field">Expiration Date:</label>
                    <input type="text" 
                        name="date" 
                        id="date"
                        pattern="[0-9][0-9]/[0-9][0-9]" 
                        maxlength="5"
                        minlength="5"
                        placeholder="MM/YY"
                        required >
                    <br>
                </div>
                    
                <input class="btn_submit" type="submit" value="Submit!">

            </div>
        </div>
    </form>
    <script>
        function validDate(){
           let data=document.getElementById("date").value;
          let arr= data.split('/')
           let input_m=arr[0];
           let input_y=arr[1];
           input_y="20"+input_y;
           input_m=parseInt(input_m);
           input_y=parseInt(input_y);
           let today=new Date();
           let curr_month=today.getMonth();
           curr_month=curr_month+1;
           let curr_year=today.getFullYear();
          if(input_m>12 || input_m===0){
            alert("not valid month! should be between 1 to 12");
            return false;
          }
               
           if(input_y<curr_year || (input_y===curr_year && input_m<curr_month)){
            alert("the visa expired(the date is invalid)");
            return false;
           }

        }

    </script>

</body>
</html>
